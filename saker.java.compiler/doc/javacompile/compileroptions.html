<!DOCTYPE html>
<html>
<head>
	<title>Compiler options&nbsp;|&nbsp;saker.java.compiler</title>
	
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/>
	
	<link rel="stylesheet" href="../../../res/bootstrap.min.css" >
	<link rel="stylesheet" href="../../../res/doc-saker.css" >
</head>
<body data-nav-location="packagedoc" data-subdoc-presence="nest-package packagedoc javadoc taskdoc">
<div class="doc-nav-bar">
	<div class="container">
		<a class="home-link" href="../../index.html" title="saker.java.compiler"><img style="height: 2.5em;" class="logo" src="../../../res/logo.svg"/><span class="page-name">saker.java.compiler</span></a>
		<a class="nav-location-item" data-nav-location="doc-docs" href="../../doc/index.html" title="Documentation">Documentation</a>
		<a class="nav-location-item" data-nav-location="doc-taskdoc" href="../../taskdoc/index.html" title="Build task documentation">TaskDoc</a>
		<a class="nav-location-item" data-nav-location="doc-javadoc" href="../../javadoc/index.html"title="Java API documentation">JavaDoc</a>
	</div>
</div>
<div class="container page-contents packagedoc">
	<div class="row">
		<div class="col-12 col-lg-3 col-xl-2 p-lg-0">
			<div class="doc-navigation-container">
				<label class="d-lg-none nav-collapse" for="doc-collapse-nav-label">
					<svg style="height: 1.5em;" viewBox="0 0 24 24">
					    <path fill="currentColor" d="M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z" />
					</svg>
					Navigation
				</label>
				<input style="display:none;" id="doc-collapse-nav-label" type="checkbox"/> 
				<div class="doc-nav">  <div class="doc-section"><ul><li><a class="doc-nav-section-link" href="../../index.html" title="Index">Index</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Package details</p><ul><li><a class="doc-nav-section-link" href="../index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../gettingstarted.html" title="Getting started">Getting started</a></li><li><a class="doc-nav-section-link" href="../featurecomparison.html" title="Feature comparison">Feature comparison</a></li><li><a class="doc-nav-section-link" href="../performancecomparison.html" title="Performance comparison">Performance comparison</a></li><li><a class="doc-nav-section-link" href="../implementationinsights.html" title="Implementation insights">Implementation insights</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Java compilation</p><ul><li><a class="doc-nav-section-link" href="index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="basics.html" title="Basics">Basics</a></li><li><label class="doc-nav-collapse" for="_doc_collapse_id_0"><a class="doc-nav-section-link" href="processors.html" title="Annotation processors">Annotation processors</a></label><input style="display:none;" id="_doc_collapse_id_0" type="checkbox"/><label class="doc-nav-section-arrow" for="_doc_collapse_id_0"></label><ul><li><a class="doc-nav-section-link" href="processorconfig.html" title="Configuration">Configuration</a></li></ul></li><li><a class="doc-nav-section-link" href="crosscompile.html" title="Cross-compilation">Cross-compilation</a></li><li class="doc-active doc-active-parent"><a class="doc-nav-section-link" href="compileroptions.html" title="Compiler options">Compiler options</a></li><li><a class="doc-nav-section-link" href="sdkmanagement.html" title="SDK management">SDK management</a></li><li><a class="doc-nav-section-link" href="bundleclasspath.html" title="Bundle classpath">Bundle classpath</a></li></ul>  </div>  <div class="doc-section">    <p class="section-title">Examples</p><ul><li><a class="doc-nav-section-link" href="../examples/index.html" title="Overview">Overview</a></li><li><a class="doc-nav-section-link" href="../examples/simple.html" title="Simple compilation">Simple compilation</a></li><li><a class="doc-nav-section-link" href="../examples/sourcefilter.html" title="Filter sources">Filter sources</a></li><li><a class="doc-nav-section-link" href="../examples/classpath.html" title="Classpath">Classpath</a></li><li><a class="doc-nav-section-link" href="../examples/processing.html" title="Annotation processing">Annotation processing</a></li><li><a class="doc-nav-section-link" href="../examples/compilerparameters.html" title="Compiler parameters">Compiler parameters</a></li><li><a class="doc-nav-section-link" href="../examples/parameternames.html" title="Reflection parameter names">Reflection parameter names</a></li><li><a class="doc-nav-section-link" href="../examples/debuginfo.html" title="Debug information">Debug information</a></li><li><a class="doc-nav-section-link" href="../examples/injectmoduleinfo.html" title="Injecting module-info attributes">Injecting module-info attributes</a></li><li><a class="doc-nav-section-link" href="../examples/nativeheaders.html" title="Native headers">Native headers</a></li><li><a class="doc-nav-section-link" href="../examples/jnicompile.html" title="JNI compilation">JNI compilation</a></li><li><a class="doc-nav-section-link" href="../examples/addexports.html" title="Add module exports">Add module exports</a></li><li><a class="doc-nav-section-link" href="../examples/crosscompile.html" title="Cross-compilation">Cross-compilation</a></li><li><a class="doc-nav-section-link" href="../examples/nestbundleclasspath.html" title="Nest bundle classpath">Nest bundle classpath</a></li></ul>  </div></div>
			</div>
		</div>
		<div class="col-12 col-lg-9 col-xl-10 doc-page">
			<div class="sb-sponsors" style="display: none;">
	<span class="sb-sponsors-title">Sponsors</span>
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
			<div class="col-md-4 col-12">
				<a class="sb-sponsors-link"></a>
			</div>
		</div>
	</div>
</div>
			<div class="doc-content"><h1 id="compiler-options">Compiler options<a class="doc-heading-anchor" href="#compiler-options"></a></h1>
<p>The <a href="../../taskdoc/saker.java.compile.html"><code>saker.java.compile()</code></a> task allows dynamic option merging based on the identifier of the compilation pass. It can be used to define the compilation parameters in one place, and then later can be applied to the compilation tasks selectively.</p>
<p>Let's look at an example where <a href="crosscompile.html" title="Cross-compilation">cross-compile</a> different versions of the same codebase:</p>
<pre><code class="language-sakerscript"><span class="d">$options</span> = <span class="b">[</span>
	<span class="b">{</span>
		<span class="h">Identifier</span>: <span class="f">jdk8</span><span class="b">,</span>
		<span class="h">SDKs</span>: <span class="b">{</span>
			<span class="h">Java</span>: <span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.sdk.html" title="Task: saker.java.sdk()">saker.java.sdk</a>(</span><span class="f">8</span><span class="e">)</span><span class="b">
		}
	},</span>
	<span class="b">{</span>
		<span class="h">Identifier</span>: <span class="f">jdk9</span><span class="b">,</span>
		<span class="h">SDKs</span>: <span class="b">{</span>
			<span class="h">Java</span>: <span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.sdk.html" title="Task: saker.java.sdk()">saker.java.sdk</a>(</span><span class="f">9</span><span class="e">)</span><span class="b">
		}
	},</span>
<span class="b">]</span>
<span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.compile.html" title="Task: saker.java.compile()">saker.java.compile</a>(</span>
	<span class="i">SourceDirectories</span>: <span class="f">src</span>,
	<span class="i">Identifier: </span><span class="f">main-jdk8</span>,
	<span class="i">CompilerOptions: </span><span class="d">$options</span>
<span class="e">)</span>
<span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.compile.html" title="Task: saker.java.compile()">saker.java.compile</a>(</span>
	<span class="i">SourceDirectories</span>: <span class="f">src</span>,
	<span class="i">Identifier: </span><span class="f">main-jdk9</span>,
	<span class="i">CompilerOptions: </span><span class="d">$options</span>
<span class="e">)</span>
</code></pre>
<p>In the above build script we can see that there are two Java compilations being done. One with the <code>main-jdk8</code> identifier, and one with the <code>main-jdk9</code> identifier. We also specify some options in the <code>$options</code> variable that we pass to both compilation tasks using the <code>CompilerOptions</code> parameter. The options specify the JDK that should be used for compilation for <code>jdk8</code>, and <code>jdk9</code>.</p>
<p>When the <a href="../../taskdoc/saker.java.compile.html"><code>saker.java.compile()</code></a> task receives the <code>CompilerOptions</code> input, it will analyze its contents, and merge the configurations specified in the options when applicable. The merging is done by checking if the <code>Identifier</code> parts in the option declaration is contained in the <code>Identifier</code> parameter of the compilation task. The inclusions is determined based on the dash (<code>'-'</code>) separated components of the identifiers.</p>
<p>The above example is works <strong>exactly</strong> the same way as the following:</p>
<pre><code class="language-sakerscript"><span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.compile.html" title="Task: saker.java.compile()">saker.java.compile</a>(</span>
	<span class="i">SourceDirectories</span>: <span class="f">src</span>,
	<span class="i">Identifier: </span><span class="f">main-jdk8</span>,
	<span class="i">SDKs: </span><span class="b">{</span>
		<span class="h">Java</span>: <span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.sdk.html" title="Task: saker.java.sdk()">saker.java.sdk</a>(</span><span class="f">8</span><span class="e">)</span><span class="b">
	}</span>
<span class="e">)</span>
<span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.compile.html" title="Task: saker.java.compile()">saker.java.compile</a>(</span>
	<span class="i">SourceDirectories</span>: <span class="f">src</span>,
	<span class="i">Identifier: </span><span class="f">main-jdk9</span>,
	<span class="i">SDKs: </span><span class="b">{</span>
		<span class="h">Java</span>: <span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.sdk.html" title="Task: saker.java.sdk()">saker.java.sdk</a>(</span><span class="f">9</span><span class="e">)</span><span class="b">
	}</span>
<span class="e">)</span>
</code></pre>
<p>The outputs of the compilations will be in separate output directories.</p>
<p>This compiler options merging facility can be used with other input parameters for the compilation tasks as well.</p>
<p>Note that the initial example could be simplified more using the <code>foreach</code> structure:</p>
<pre><code class="language-sakerscript"><span class="d">$options</span> = <span class="c"># ... same as above ...</span>
<span class="j">foreach </span><span class="d">$jdk</span><span class="j"> in </span><span class="b">[</span><span class="f">jdk8</span><span class="b">,</span> <span class="f">jdk9</span><span class="b">]</span> {
	<span class="e"><a href="../../../saker.java.compiler/taskdoc/saker.java.compile.html" title="Task: saker.java.compile()">saker.java.compile</a>(</span>
		<span class="i">SourceDirectories</span>: <span class="f">src</span>,
		<span class="i">Identifier: </span><span class="f">&quot;main-</span>{ <span class="d">$jdk</span> }<span class="f">&quot;</span>,
		<span class="i">CompilerOptions: </span><span class="d">$options</span>
	<span class="e">)</span>
}
</code></pre>
<p>This can make easier to add new flavors of your compilation passes.</p>
<link href="../../../css/sakerscript.css"  rel="stylesheet" type="text/css" /></div>
			<div class="end-section-links">
				<div class="end-section-prev">
					<a class="doc-prev-section" href="../../doc/javacompile/crosscompile.html" title="Cross-compilation"><svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z" />
</svg>Cross-compilation</a>
				</div>
				<div class="end-section-next">
					<a class="doc-next-section" href="../../doc/javacompile/sdkmanagement.html" title="SDK management">SDK management<svg class="doc-section-arrow" viewBox="0 0 24 24">
    <path fill="currentColor" d="M4,11V13H16L10.5,18.5L11.92,19.92L19.84,12L11.92,4.08L10.5,5.5L16,11H4Z" />
</svg></a>
				</div>
			</div>
			
		</div>
	</div>
</div>
<div class="doc-footer">
	<div class="container">
		<div class="row">
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">About</p>
				<div><a href="/index.html" title="Saker.build home page">Home</a></div>
				<div data-footer-location="doc-docs"><a href="../../index.html" title="saker.java.compiler documentation index">Documentation index</a></div>
				<div><a href="../../../saker.build/index.html" title="Information about the saker.build system">saker.build system</a></div>
				<div><a href="../../../saker.nest/index.html" title="Information about the saker.nest repository">saker.nest repository</a></div>
				<div><a href="/contact.html" title="Contact us">Contact</a></div>
			</div>
			<div class="footer-section col-6 col-sm-4 col-md-3">
				<p class="footer-section-title">Resources</p>
				<div data-footer-location="doc-docs"><a href="../../doc/index.html" title="saker.java.compiler documentation index">Documentation</a></div>
				<div data-footer-location="doc-javadoc"><a href="../../javadoc/index.html" title="JavaDoc for saker.java.compiler">JavaDoc</a></div>
				<div data-footer-location="doc-taskdoc"><a href="../../taskdoc/index.html"  title="Documentation of build tasks in saker.java.compiler">TaskDoc</a></div>
				<div data-footer-location="nest-package"><a href="https://nest.saker.build/package/saker.java.compiler" title="saker.java.compiler | saker.nest">saker.nest package page</a></div>
				<div><a href="https://github.com/sakerbuild/saker.java.compiler" title="saker.java.compiler on GitHub">GitHub</a></div>
			</div>
		</div>	
		<div class="row">
			<div class="col">
			&copy; Bence Sipka 2020
			</div>
		</div>
	</div>
</div>


<script>
if(window.hasOwnProperty("hljs")){
	hljs.configure({
	  languages: []
	});
	hljs.initHighlightingOnLoad();
}
</script>

</body>
</html>